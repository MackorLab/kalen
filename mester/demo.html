<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JavaScript - Маска для телефона</title>
  <link rel="stylesheet" href="/examples/libs/bootstrap-3/css/bootstrap.min.css">
  <style>
    body {
      padding: 30px;
    }

    hr {
      margin: 5px 0 5px;
    }

    input {
      display: inline-block !important;
      width: auto !important;
    }

    #country,
    #phone {
      display: inline-block;
      width: auto;
    }

    label[for="phone"] {
      display: block;
    }
  </style>
</head>

<body>

  <div class="form-group">
    <label for="phone">Телефон: </label>
    <select id="country" class="form-control">
      <option value="ru">Россия +7</option>
      <option value="ua">Украина +380</option>
      <option value="by">Белоруссия +375</option>
    </select>
    <input id="phone" type="text" class="form-control tel" value="">
  </div>

  <script>
    window.addEventListener("DOMContentLoaded", function () {
      [].forEach.call(document.querySelectorAll('.tel'), function (input) {
        var keyCode;
        function mask(event) {
          event.keyCode && (keyCode = event.keyCode);
          var pos = this.selectionStart;
          var matrix = "___ ___ __ __",
            i = 0,
            def = matrix.replace(/\D/g, ""),
            val = this.value.replace(/\D/g, ""),
            new_value = matrix.replace(/[_\d]/g, function (a) {
              return i < val.length ? val.charAt(i++) || def.charAt(i) : a
            });
          i = new_value.indexOf("_");
          if (i != -1) {
            i < 5 && (i = 3);
            new_value = new_value.slice(0, i)
          }
          var reg = matrix.substr(0, this.value.length).replace(/_+/g,
            function (a) {
              return "\\d{1," + a.length + "}"
            }).replace(/[+()]/g, "\\$&");
          reg = new RegExp("^" + reg + "$");
          if (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) this.value = new_value;
          if (event.type == "blur" && this.value.length < 5) this.value = ""
        }
        input.addEventListener("input", mask, false);
        input.addEventListener("focus", mask, false);
        input.addEventListener("blur", mask, false);
        input.addEventListener("keydown", mask, false)
      });
    });
  </script>

</body>

</html>
